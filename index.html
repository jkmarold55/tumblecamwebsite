<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Tumble Camera</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Tumble Cam</h1>
        <p>A Raspberry Pi-Powered Camera for the Social Generation</p>
        <p class="view"><a href="https://github.com/jkmarold55/tumblecamera">View the Project on GitHub <small>jkmarold55/tumblecamera</small></a></p>
        <ul>
          <li><a href="https://github.com/jkmarold55/tumblecamera/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/jkmarold55/tumblecamera/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://thetumblecam.tumblr.com">View on <strong>Tumblr</strong></a></li>
        </ul>
        
      </header>
      <section>
        <a href="#Overview"></a>
        <h1>Overview</h1>
        <p><b>TumbleCam</b> is a digital camera that takes photographs and uploads them to Tumblr. When the shutter is pressed on the camera, a picture is taken and then uploaded to Dropbox, then it is transferred from there to the Tumblr page, where it is added to the feed.</p>
        <h2>Contents</h2>
        <ul>
          <li><a href="#Overview">Overview</a></li>
            <ul>
              <li><a href="#Materials">Materials</a></li>
            </ul>
          <li><a href="#Code">Code</a></li>
            <ul>
              <li><a href="#DropboxUploader">Dropbox Uploader</a></li>
              <li><a href="#Prepare">Prepare the Pi</a></li>
              <li><a href="#MainScript">Main Script</a></li>
            </ul>
            <li><a href="#Conclusion">Conclusion</a></li>
            <li><a href="#Gallery">Gallery</a></li>
          </li>
        </ul>
        <img src="/images/top-min.jpg" alt="top view of camera">
        <br>
        <br>
        <a name="Materials"></a>
        <h2>Materials</h2>
        
        <p>All materials that we used to build the camera are accompanied by Amazon links. <i><b>Note:</b> The links are not affiliate linked.</i></p>
        
        <ul>
          <li><b>Raspberry Pi 3</b> Model B</b><a href="https://www.amazon.com/ELEMENT-Element14-Raspberry-Pi-Motherboard/dp/B07BDR5PDW/"> <b>Purchase</b></a></li>
          <ul>
            <li>The Model B edition of the Raspberry Pi is camera-sized and has WiFi capabilities, allowing for an untethered, mobile camera.</li>
          </ul>
          <li><b>Raspberry Pi</b> Camera Module V2<a href="https://www.amazon.com/Raspberry-Pi-Camera-Module-Megapixel/dp/B01ER2SKFS"> <b>Purchase</b></a></li>
          <ul>
            <li>After experimenting with a larger camera, the V2 was chosen because it was low profile (keeping the camera profile small) and it had excellent quality. The images come out at a crisp 1080p.</li>
          </ul>
          <li><b>NovoBeam NBP-3000</b> External Battery<a href="https://www.amazon.com/Novobeam-Ultra-Compact-Waterproof-Dustproof-Portable/dp/B00K3EUE90"> <b>Purchase</b></a></li>
          <ul>
            <li>While the cylindrical shape was awkward, it suited the project's purposes because it was tin enough to simply be tethered to the side of the camera with velcro or even be used as a hand grip if mounted below the camera.</li>
          </ul>
          <li><b>MicroSD Card</b> <a href="https://www.amazon.com/Sandisk-Ultra-Micro-UHS-I-Adapter/dp/B073K14CVB/"> <b>Purchase</b></a></li>
          <ul>
            <li>We recommend a 16GB SD card because the images will be stored locally as well as in the cloud for redundancy. More available space will allow more images to be taken before having to go into the project files and manually delete them.</li>
            <li><b>Raspbian</b> is the operating system of choice. It is easy to use, and simple to set up.<a href="https://www.raspberrypi.org/downloads/raspbian/"> <b>Download</b></a></li>
          </ul>
          <li><b>UCTRONICS UC-430</b> 3.5" Touch Display<a href="https://www.amazon.com/UCTRONICS-Display-Touch-Screen-Raspberry/dp/B076M399XX"> <b>Purchase</b></a></li>
          <ul>
            <li>The display serves to give the user a live preview of the image before it is taken as the viewfinder of the device. 3.5 inches allows it to be roughly the same size as the Raspberry Pi, allowing it to fit snugly in a case with the computer.</li>
            <li><a href="display.pdf"><b>Display Documentation</b></a></li>
          </ul>
        </ul>
        <br>
        <a name="Chassis"></a>
      <h2>Chassis</h3>
        <ul>
          <li><b>3D Printer</b></li>
          <ul>
            <li>While this may not be accessible to most, the printer allows for the whole device to come together as a working, finished product by producing a plastic chassis for the camera. The case will contain the buttons, wires, and other cables, preventing them from sticking out and having to carry a breadboard while using the camera.</li>
            <li><a href="/tumblecamcase.stl"><b>Download STL</b></a></li>
          </ul>
        </ul>
        <br>
    <a name="Code"></a>
    <h1>Code</h1>
    <a name="DropboxUploader"></a>
      <h2>Dropbox Uploader</h2>
        <p>Extract this folder to the /home/pi directory. The main Python code will reference this library when it runs.</p>
          <p><a href="https://github.com/jkmarold55/tumblecamwebsite/blob/gh-pages/Dropbox-Uploader-master.zip">Download</a></p>
        <p>Next, authenticate Dropbox by running the following script:</p>
          <pre><code>#If you get an "Insufficient privilages" error, run the BASH commands as SUDO.<br>$chmod +x /home/pi/Dropbox-Uploader-master/dropbox_uploader.sh<br>$./home/pi/Dropbox-Uploader-master/dropbox_uploader.sh
          </code></pre>
        <p>The script will ask you to enter an authorization code. You can find this at <a href="https://www.dropbox.com/developers/apps">www.drobox.com/developers/apps</a>. You will have to create a Dropbox Developer account to access this dashboard, where you can create a new API enabled app. There should be a button to generate an API key. Simply copy and paste it into the script when prompted.</p>
        <p>Special thanks to <a href="https://github.com/andreafabrizi/Dropbox-Uploader">Andrea Fabrizi</a> for the uploader.</p>
	<a name="Prepare"></a>
	<h2>Prepare the Raspberry Pi</h2>
        <p>In the terminal, enable the camera by typing <code>sudo raspi-config</code>. With the arrow keys on the keyboard, select "Interfacing Options", then "Camera". Select the "Enable" option and press "Yes" to reboot. The Pi will enable its camera dependencies for use in the program.</p>
        <a name="MainScript"></a>
        <h2>Main Script</h2>
        <p>Create a new Python 3.XX file. At the top, establish the definition for the Dropbow-Upload code to use later. It will also set up timestamping for the image filenames.</p>
          <pre><code>def restart():<br>   timestamp=datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")<br>   camera.capture(timestamp+".jpg")<br>   photofile = "/home/pi/Dropbox-Uploader/dropbox_uploader.sh upload /home/pi/[PATH_TO_YOUR_PROJECT_FILES]"+timestamp+".jpg "+timestamp+".jpg "<br>   call([photofile], shell=True)</code></pre>
        <p>Then, import the dependencies seperate from the definition:</p>
          <pre><code>from picamera import PiCamera<br>from gpiozero import Button<br>from subprocess import call<br>from time import sleep<br>import datetime</code></pre>
        <p>The code now needs to set up the camera and the shutter button.</p>
          <pre><code>camera = PiCamera()<br>btn = Button([GPIO_PIN_GOES_HERE])<br>#Start the viewfinder<br>camera.start_preview()<br>#This part made everything right-side-up for us,<br>#but if it ends up upside down for you, remove the<br>#180 degree rotation line<br>camera.rotation = 180<br>i = 0<br>v = 0</code></pre>
        <p>Next, the code will reference the definition we created above. Rather than combining the code from the definition into this section of the code, we seperated it so that the program would repeat after every photo, something it wouldn't do before.</p>
          <pre><code>while True:<br>  images = []<br> if btn.is_pressed:<br>    restart()</code></pre>
        <p>Now, the program will execute the definition we established in the beginning, running the code until the shutter is pressed. Then, it continues the script until it hits <code>restart()</code>when it will be ready to take another picture.</p>
    <br>
    <a name="Conclusion"></a>
    <h1>Conclusion</h1>
      <p>When the code executes, the image that the Pi captures will be automatically uploaded via Dropbox's API to your specified Dropbox folder. From there, you can link the Dropbox account with <a href="https://www.ifttt.com">IFTTT</a> in order to set up automatic uploads to social media platforms like <b>Twitter</b>, <b>Facebook</b>, <b>Tumblr</b>, and more. <b>IFTTT</b> will upload the images added to the Dropbox folder every 5 minutes or so, so there might be a delay here; however, expect less than 5 seconds of delay when the image uploads to Dropbox initially.</p>
    <br>
      <a name="Gallery"></a>
    <h1>Gallery</h1>
      <img src="IMG_20190312_150302-min.jpg">
      <img src="IMG_20190312_150313-min.jpg">
      <img src="IMG_20190312_150535-min.jpg">
      <img src="IMG_20190312_150623-min.jpg">
      <img src="IMG_20190312_150656-min.jpg">
      <img src="IMG_20190312_150753-min.jpg">
      <img src="IMG_20190312_150823-min.jpg">
      <img src="IMG_20190312_150834-min.jpg">
      <img src="IMG_20190312_150939-min.jpg">
      <img src="IMG_20190312_151006-min.jpg">
    </section>
<footer>
  <section class="move-area">
    <div class='.container'>
      <div class='eye'></div>
      <div class='eye'></div>
    </div>
  </section>
<p>This page is maintained by <a href="http://github.com/jkmarold55">Jake Marold</a></p>
<img src="IMG_20190312_151421-min.jpg">
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    <script src="javascripts/script.js"></script>
  </body>
</html>
